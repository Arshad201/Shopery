import{u as j,j as s,L as p,o as f,q as u,t as g,v as w,w as y,a as x,r as N}from"./index-59e27120.js";import{P as S}from"./PageHeader-66513bad.js";const v=({product:e})=>{const n=j(),o=e.additionalInfo.discount,d=e.price-e.price*o/100,m=(a,c)=>{const t={id:a,quantity:c===e.additionalInfo.stock?c:c+1};t.quantity===e.additionalInfo.stock&&n(f({show:!0,msg:"You reached the stock!",type:"error"})),n(u(t));const i=JSON.parse(localStorage.getItem("cart"));i.map(r=>{r.id===a&&(r.quantity=t.quantity)}),localStorage.setItem("cart",JSON.stringify(i))},l=(a,c)=>{const t={id:a,quantity:c===1?c:c-1};n(u(t));const i=JSON.parse(localStorage.getItem("cart"));i.map(r=>{r.id===a&&(r.quantity=t.quantity)}),localStorage.setItem("cart",JSON.stringify(i))},h=a=>{const t=JSON.parse(localStorage.getItem("cart")).filter(i=>i.id!=a);localStorage.setItem("cart",JSON.stringify(t)),n(g()),n(w()),n(f({show:!0,msg:"Product removed from your cart!",type:"success"}))};return s.jsxs("div",{className:"cart-item",children:[s.jsxs(p,{to:`/shop/${e._id}`,className:"product",children:[s.jsx("img",{src:e.images[0].url,alt:""}),s.jsx("span",{className:"m-fontsize fw-500",children:e.name})]}),s.jsxs("div",{className:"price m-fontsize fw-400",children:["$",d]}),s.jsx("div",{className:"quantity",children:s.jsxs("div",{className:"quantity-controller",children:[s.jsx("button",{className:"m-fontsize fw-500",onClick:()=>l(e._id,e.quantity),children:"-"}),s.jsx("span",{className:"m-fontsize fw-400",children:e.quantity}),s.jsx("button",{className:"m-fontsize fw-500",onClick:()=>m(e._id,e.quantity),children:"+"})]})}),s.jsxs("div",{className:"subtotal m-fontsize fw-500",children:["$",d*e.quantity," ",s.jsx("button",{className:"m-fontsize fw-500",onClick:()=>h(e._id),children:"X"})]})]})},I=()=>{const e=y(),n=j(),{data:o,status:d}=x(t=>t.productReducer.products.cartProducts),{login:m}=x(t=>t.userReducer.user),[l,h]=N.useState(40);let a=0;o.forEach(t=>{const r=(t.price-t.price*t.additionalInfo.discount/100)*t.quantity;a=a+r});const c=()=>{e(`${m?"/checkout":"/signin?redirect=checkout"}`)};return N.useEffect(()=>{n(g())},[]),s.jsxs("section",{className:"cart",children:[s.jsx(S,{}),s.jsx("h1",{className:"heading3",children:"My Shopping Cart"}),o.length>0?s.jsxs("div",{className:"cart-container",children:[s.jsx("div",{className:"product-coupon-wrapper",children:s.jsxs("div",{className:"cart-item-container",children:[s.jsxs("div",{className:"cart-headings",children:[s.jsx("h3",{className:"m-fontsize fw-500",children:"PRODUCT"}),s.jsx("h3",{className:"m-fontsize fw-500",children:"PRICE"}),s.jsx("h3",{className:"m-fontsize fw-500",children:"Quantity"}),s.jsx("h3",{className:"m-fontsize fw-500",children:"Subtotal"})]}),d==="loading"?s.jsx(s.Fragment,{children:"Loading"}):o.map(t=>s.jsx(v,{product:t},t._id))]})}),s.jsxs("div",{className:"cart-total",children:[s.jsx("h3",{className:"xl-fontsize fw-500",children:"Cart Total"}),s.jsxs("div",{className:"row",children:[s.jsx("span",{className:"s-fontsize fw-400",children:"Subtotal:"}),s.jsxs("span",{className:"s-fontsize fw-500",children:["$",a]})]}),s.jsxs("div",{className:"row",children:[s.jsx("span",{className:"s-fontsize fw-400",children:"Shipping:"}),s.jsx("span",{className:"s-fontsize fw-500",children:l===0?"Free":`+$${l}`})]}),s.jsxs("div",{className:"row",children:[s.jsx("span",{className:"m-fontsize fw-400",children:"Total:"}),s.jsxs("span",{className:"m-fontsize fw-600",children:["$",a+l]})]}),s.jsx("button",{className:"btn",onClick:c,children:"Proceed to checkout"})]})]}):s.jsxs("div",{className:"wishlist-container p-not-found",children:[s.jsx("h2",{className:"m-fontsize",children:"NO Product Found!"}),s.jsx(p,{className:"btn",to:"/shop",children:"Go to Shop"})]})]})};export{I as default};
